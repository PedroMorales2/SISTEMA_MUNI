<!-- scripts.html - Orquestador de JavaScript -->

<!-- Chart.js para grÃ¡ficos -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<!-- ============================================================================ -->
<!-- CONFIGURACIÃ“N GLOBAL -->
<!-- ============================================================================ -->
<script>
    console.log('ğŸ“‹ Cargando configuraciÃ³n global...');
    
    // Configurar la URL de la API
    
    console.log('âœ“ API_URL configurado:', API_URL);
    
    // Variables globales para controlar carga de datos
    window.configuracionesCargadas = false;
    window.historialCargado = false;
    
    // Variables globales para datos
    if (typeof recursosData === 'undefined') {
        var recursosData = [];
        var recursosFiltrados = [];
    }
    
    if (typeof configuracionesData === 'undefined') {
        var configuracionesData = [];
        var configuracionesFiltradas = [];
        var subcategoriasDisponibles = new Set();
    }
    
    if (typeof historialData === 'undefined') {
        var historialData = [];
        var paginaActual = 1;
        var registrosPorPagina = 20;
    }
    
    if (typeof chartDistribucion === 'undefined') {
        var chartDistribucion = null;
        var chartConfiguraciones = null;
    }
    
    console.log('âœ“ Variables globales inicializadas');
</script>

<!-- ============================================================================ -->
<!-- TABS.JS - Sistema de Tabs -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando tabs.js...');
{% include 'admin/recursos/js/tabs.js' %}
console.log('âœ“ tabs.js cargado');
</script>

<!-- ============================================================================ -->
<!-- UTILS.JS - Funciones auxiliares compartidas -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando utils.js...');
{% include 'admin/recursos/js/utils.js' %}
console.log('âœ“ utils.js cargado');
</script>

<!-- ============================================================================ -->
<!-- GESTION_RECURSOS.JS - GestiÃ³n del inventario -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando gestion_recursos.js...');
{% include 'admin/recursos/js/gestion_recursos.js' %}
console.log('âœ“ gestion_recursos.js cargado');
</script>

<!-- ============================================================================ -->
<!-- GESTION_CONFIGURACION.JS - GestiÃ³n de configuraciones -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando gestion_configuracion.js...');
{% include 'admin/recursos/js/gestion_configuracion.js' %}
console.log('âœ“ gestion_configuracion.js cargado');
</script>

<!-- ============================================================================ -->
<!-- GESTION_HISTORIAL.JS - GestiÃ³n del historial -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando gestion_historial.js...');
{% include 'admin/recursos/js/gestion_historial.js' %}
console.log('âœ“ gestion_historial.js cargado');
</script>

<!-- ============================================================================ -->
<!-- GESTION_ESTADISTICAS.JS - GestiÃ³n de estadÃ­sticas -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando gestion_estadisticas.js...');
{% include 'admin/recursos/js/gestion_estadisticas.js' %}
console.log('âœ“ gestion_estadisticas.js cargado');
</script>


<!-- ============================================================================ -->
<!-- MODALES.JS - Sistema de Modales -->
<!-- ============================================================================ -->
<script>
console.log('ğŸ“¦ Cargando modales.js...');
{% include 'admin/recursos/js/modales.js' %}
console.log('âœ“ modales.js cargado');
</script>


<!-- ============================================================================ -->
<!-- INICIALIZACIÃ“N DEL SISTEMA -->
<!-- ============================================================================ -->
<script>
    // Inicializar al cargar la pÃ¡gina
    // Inicializar al cargar la pÃ¡gina
document.addEventListener('DOMContentLoaded', function() {
    console.log('ğŸš€ Inicializando Sistema de GestiÃ³n de Recursos...');
    
    // 1. Inicializar sistema de modales
    try {
        inicializarModales();
    } catch (error) {
        console.error('âŒ Error al inicializar modales:', error);
    }
    
    // 2. Inicializar sistema de tabs
    try {
        inicializarTabs();
    } catch (error) {
        console.error('âŒ Error al inicializar tabs:', error);
    }
    
    // 3. Cargar recursos del primer tab (inventario)
    try {
        if (typeof cargarRecursos === 'function') {
            cargarRecursos();
        } else {
            console.error('âŒ FunciÃ³n cargarRecursos no estÃ¡ definida');
        }
    } catch (error) {
        console.error('âŒ Error al cargar recursos:', error);
    }

    

    console.log('âœ… Sistema inicializado correctamente');
    console.log('ğŸ’¡ Atajos: Alt + â† â†’ navegar tabs | ESC cerrar modal');
});

    // Manejo de errores global
    window.addEventListener('error', function(event) {
        console.error('âŒ Error no capturado:', event.error);
        if (typeof ocultarLoading === 'function') {
            ocultarLoading();
        }
    });

    // Log cuando se cierra la ventana
    window.addEventListener('beforeunload', function() {
        console.log('ğŸ‘‹ Cerrando Sistema de GestiÃ³n de Recursos');
    });
</script>